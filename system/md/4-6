DNS解析原理
###前言

用户浏览网页，从浏览器中输入网址到收到内容，这个过程是由很多步骤组成的，其中就包括DNS解析过程，加速DNS解析速度无疑对用户体验有莫大的好处，如何优化DNS首先就必须了解DNS原理。

###什么是DNS

DNS是域名系统(Domain Name System)的缩写，是一种组织域层次结构的计算机和网络服务命名系统。当用户在应用程序中输入DNS名称时，DNS服务可以将此名称解析为与此名称相关的IP 地址，以便能够正确的获取资源。

通俗的说，就是用户是无法直接使用网址来获取资源的，因为网络地址是通过IP来映射的，而DNS就是负责把域名映射成IP的一个服务。

###DNS怎么工作

####DNS的查询过程

DNS查询可以分为本地查询，客户机到服务器查询，服务器递归查询。见图1-1

zimg[图1-1 DNS查询过程]/imgs/20070727140525512.gif

xinfo 假如无法查询到相关记录，则接着向后查询。

本地查询：主机文件（HOST文件配置信息），系统的DNS缓存。

客户机到服务器查询：查询首选DNS服务器的就地配置区域，服务器的缓存

服务器递归查询：递归查询其他DNS服务器

xinfo 通过浏览器浏览网页，先查询浏览器DNS缓存，不同浏览器缓存策略有所不同。

####递归解析的过程

例如定位：host.example.microsoft.com，首选服务器分析全名并确定对于顶级域com具有绝对控制权的服务器的位置。随后，对com DNS 服务器使用迭代查询，以获取microsoft.com服务器的参考信息。然后参考性应答从microsoft.com服务器传送到example.microsoft.com的 DNS 服务器。最后，与服务器 example.microsoft.com 联系上。因为该服务器包括作为其配置区域一部分的查询名称，所以，它向启动递归的源服务器作出权威性的应答。当源服务器接收到表明已获得对请求查询的权威性应答的响应时，它将此应答转发给发出请求的客户机，这样，递归查询过程就完成了。服务器递归查询。见图1-2

zimg[图1-1 DNS查询过程]/imgs/20070727140526897.gif

###DNS优化相关

DNS预取，DNS个数控制。

code.text
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="http://www.spreadfirefox.com/">
.